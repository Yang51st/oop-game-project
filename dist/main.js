(()=>{"use strict";var e=document.querySelector(".highscore");let t=0;var s=screen.width,i=screen.width/75-4,r="left",h="right",a={};["enemy.png","stars.png","player.png"].forEach((e=>{var t=document.createElement("img");t.src="images/"+e,a[e]=t}));class n{render(e){e.drawImage(this.sprite,this.x,this.y)}}class o extends n{constructor(e){super(),this.x=e,this.y=-156,this.sprite=a["enemy.png"],this.speed=Math.random()/2+.25}update(e){this.y=this.y+e*this.speed}}class c extends n{constructor(){super(),this.x=150,this.y=436,this.sprite=a["player.png"]}move(e){e===r&&this.x>0?this.x=this.x-75:e===h&&this.x<s-75&&(this.x=this.x+75)}getX(){return this.x}getY(){return this.y}}new class{constructor(e){this.player=new c,this.setupEnemies();var t=document.createElement("canvas");t.width=s,t.height=500,e.appendChild(t),this.ctx=t.getContext("2d"),this.gameLoop=this.gameLoop.bind(this)}setupEnemies(){for(this.enemies||(this.enemies=[]);this.enemies.filter((e=>!!e)).length<i;)this.addEnemy()}addEnemy(){for(var e=s/75,t=Math.floor(Math.random()*e);this.enemies[t];)t=Math.floor(Math.random()*e);this.enemies[t]=new o(75*t)}start(){this.score=0,this.lastFrame=Date.now(),document.addEventListener("keydown",(e=>{37===e.keyCode?this.player.move(r):39===e.keyCode&&this.player.move(h),13===e.keyCode&&(this.restarter(),console.log("HI"))})),this.gameLoop()}restarter(){console.log("Restarted"),this.score>t&&(t=this.score),e.innerHTML=t.toString(),this.score=0,this.lastFrame=Date.now(),this.enemies=[],this.player=new c,this.setupEnemies(),this.gameLoop()}gameLoop(){var e=Date.now()-this.lastFrame;this.score+=e,this.enemies.forEach((t=>t.update(e)));for(let e=0;e<screen.width/374;e++)this.ctx.drawImage(a["stars.png"],374*e,0);this.ctx.drawImage(a["stars.png"],0,0),this.enemies.forEach((e=>e.render(this.ctx))),this.player.render(this.ctx),this.enemies.forEach(((e,t)=>{e.y>500&&delete this.enemies[t]})),this.setupEnemies(),this.isPlayerDead()?(console.log("END"),this.ctx.font="bold 30px Impact",this.ctx.fillStyle="#ffffff",this.ctx.fillText(this.score+" GAME OVER",5,30)):(this.ctx.font="bold 30px Impact",this.ctx.fillStyle="#ffffff",this.ctx.fillText(this.score,5,30),this.lastFrame=Date.now(),requestAnimationFrame(this.gameLoop))}isPlayerDead(){var e=!1,t=this.player.x,s=this.player.y;return this.enemies.forEach((i=>{i.x==t&&s-i.y<156&&(e=!0)})),!!e}}(document.getElementById("app")).start()})();